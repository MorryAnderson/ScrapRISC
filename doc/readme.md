Author : Morry4C 
Email: worryanderson@gmail.com

Email: morry4c@163.com

./outputs/exe/make.ps1 = ScrapHDLCompiler.exe  -> log.txt

![image-20240208011156435](.\RV32I.png)

[Overall]
--------------------------------------------------------------------------------
- 42022个逻辑门
- 115197条连接线

- 时钟周期：20 ticks (2Hz)
- RV32E指令集（共39条指令）
- 5级流水线：
  - 取址 (Instruction Fetch, IF)
  - 译码 (Instruction Decode, ID)
  - 执行 (Execution, EX)
  - 访存 (Memory, MEM)
  - 写回 (Write Back, WB)

- 数据转发解决数据冒险
- 动态分支预测
- 支持异常与中断
- 可单步调试



[时钟与复位]
--------------------------------------------------------------------------------
- 时钟周期： 20 ticks，占空比：15 %
- 复位信号：异步复位，同步释放



[随机数发生器]
--------------------------------------------------------------------------------
- 8阶M序列发生器
- 本源多项式：x^8 + x^4 + x^3 + x^2 + 1



[用户交互接口]
--------------------------------------------------------------------------------
系统输入：时钟使能/系统复位/硬件中断
手柄输入：上/下/左/右/X/Y/退出/确认
调试输入：调试时钟/调试暂停/调试运行
状态输出：8个指示灯




[输入同步]
--------------------------------------------------------------------------------
- 跨时钟域处理，异步输入，同步输出

  


[按键处理]
--------------------------------------------------------------------------------
- 寻址范围：0xC0000000 ~ 0xC0000003

- 输出32位手柄按键状态编码

  


[状态输出寄存器]
--------------------------------------------------------------------------------
- 寻址范围：0xC0000004

- 位宽：8位

- 建立时间：2 ticks

- 保持时间：1 tick

- 输出延时：3 ticks

  


[显示器]
--------------------------------------------------------------------------------
- 寻址范围：0x80000000 ~ 0x800001FF
- 显示屏尺寸：16 * 16
- 显示缓存大小：16 * 16 bits 
- 同步信号周期：120个时钟周期（1分钟）



[指令ROM]
--------------------------------------------------------------------------------
- 寻址范围：0x00000000 ~ 0x000001FF

- 容量：512 字节

- 最多存储128个32位指令

  


[数据ROM]
--------------------------------------------------------------------------------
- 寻址范围：0x00001000 ~ 0x000010FF

- 容量：256 字节

  


[数据RAM]
--------------------------------------------------------------------------------
- 寻址范围：0x10000000 ~ 0x100000FF
- 容量：256 字节



[总线仲裁器]
--------------------------------------------------------------------------------
- 连接的外设：指令ROM/数据ROM/数据RAM/显示器/按键/通用输出寄存器



[取址(Instruction Fetch, IF)]
--------------------------------------------------------------------------------
- 跳转指令判断

- 内含程序计数器(PC)

  


[译码(Instruction Decode, ID)]
--------------------------------------------------------------------------------
- 生成各级控制信号

- 生成立即数和操作数

- 非法指令异常检测

  


[执行(Execution, EX)]
--------------------------------------------------------------------------------
- 内含ALU（实现 加减/左右移/比较/与/或/异或）

- 输出延时：12 ticks

  


[访存(Memory, MEM)]
--------------------------------------------------------------------------------
- 非对齐访问异常检测

  


[写回(Write Back, WB)]
--------------------------------------------------------------------------------
- 写入寄存器堆

  

[流水线寄存器]
--------------------------------------------------------------------------------



[寄存器堆]
--------------------------------------------------------------------------------

- 15个32位寄存器(R1-R15)

- R0寄存器固定等于0

  


[控制单元(Control Unit, CU)]
--------------------------------------------------------------------------------
- 控制流水线寄存器的使能和复位



[冒险检测单元(Hazard Detection Unit, HDU)]
--------------------------------------------------------------------------------



[数据转发单元(Data Forwarding Unit, DFU)]
--------------------------------------------------------------------------------




[BPU]
--------------------------------------------------------------------------------
- 基于两位饱和计数器的动态分支预测

- 预测失败惩罚：3时钟周期

  


[预测历史记录表(Branch History Table, BHT)]
--------------------------------------------------------------------------------
- 容量：4 字节，可存储16条历史记录

  


[预测目的地址缓存(Branch Target Buffer, BTB)]
--------------------------------------------------------------------------------
- 容量：64 字节，可存储16条历史记录



[异常中断单元(Exception Interrupt Unit, EIU]
--------------------------------------------------------------------------------




[异常信息记录]
--------------------------------------------------------------------------------
- SEPC寄存器记录异常发生时的PC值
- SCAUSE寄存器记录异常发生原因（非法指令/非对其访问/ecall指令/硬件中断）
